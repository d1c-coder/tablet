<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TAB Points - Enhanced 2025</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            background-color: #0B0E36;
            color: #FFFFFF;
            height: 100vh;
            overflow: hidden;
            position: fixed;
            width: 100%;
        }
        
        /* Animated background particles */
        .bg-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: #73BEDD;
            border-radius: 50%;
            opacity: 0.3;
            animation: float 20s infinite ease-in-out;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            25% { transform: translateY(-100px) translateX(50px); }
            50% { transform: translateY(-200px) translateX(-30px); }
            75% { transform: translateY(-100px) translateX(30px); }
        }
        
        .container {
            width: 100%;
            max-width: 480px;
            padding: 15px;
            text-align: center;
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            height: calc(100vh - 80px);
            overflow: hidden;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 10px 15px;
            background: rgba(28, 31, 74, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            margin-bottom: 10px;
            box-shadow: 0 8px 32px rgba(115, 190, 221, 0.1);
        }
        
        .username {
            font-size: 18px;
            font-weight: bold;
            background: linear-gradient(135deg, #73BEDD 0%, #4a9bc7 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .leaderboard-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 15px;
            border: 2px solid #73BEDD;
            border-radius: 20px;
            color: #73BEDD;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 10px;
            background: rgba(115, 190, 221, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        
        .leaderboard-btn:hover {
            background: #73BEDD;
            color: #0B0E36;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(115, 190, 221, 0.4);
        }
        
        .stats-container {
            display: flex;
            justify-content: space-around;
            margin: 10px 0;
            gap: 10px;
        }
        
        .stat-card {
            flex: 1;
            background: rgba(28, 31, 74, 0.6);
            backdrop-filter: blur(10px);
            padding: 10px;
            border-radius: 12px;
            border: 1px solid rgba(115, 190, 221, 0.2);
        }
        
        .stat-label {
            font-size: 10px;
            color: #8a9cc9;
            margin-bottom: 3px;
        }
        
        .stat-value {
            font-size: 16px;
            font-weight: bold;
            color: #73BEDD;
        }
        
        .tap-circle {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px auto;
            width: 220px;
            height: 220px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1C1F4A 0%, #2a2f6b 100%);
            cursor: pointer;
            position: relative;
            box-shadow: 
                0 0 60px rgba(115, 190, 221, 0.3),
                inset 0 0 40px rgba(115, 190, 221, 0.1);
            transition: all 0.2s ease;
            border: 3px solid transparent;
            background-clip: padding-box;
            flex-shrink: 0;
        }
        
        .tap-circle::before {
            content: '';
            position: absolute;
            inset: -3px;
            border-radius: 50%;
            padding: 3px;
            background: linear-gradient(135deg, #73BEDD, #4a9bc7, #73BEDD);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            animation: rotate 3s linear infinite;
        }
        
        @keyframes rotate {
            to { transform: rotate(360deg); }
        }
        
        .tap-circle:active {
            transform: scale(0.95);
            box-shadow: 
                0 0 80px rgba(115, 190, 221, 0.5),
                inset 0 0 60px rgba(115, 190, 221, 0.2);
        }
        
        .tap-inner {
            width: 85%;
            height: 85%;
            border-radius: 50%;
            background: linear-gradient(135deg, #2a2f6b 0%, #1C1F4A 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .tap-logo {
            width: 110px;
            height: 110px;
            background: linear-gradient(135deg, #73BEDD 0%, #4a9bc7 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            box-shadow: 0 10px 30px rgba(115, 190, 221, 0.4);
            transition: transform 0.2s ease;
        }
        
        .tap-circle:active .tap-logo {
            transform: scale(0.9);
        }
        
        .ripple {
            position: absolute;
            border-radius: 50%;
            border: 2px solid #73BEDD;
            animation: ripple 1s ease-out forwards;
            pointer-events: none;
        }
        
        @keyframes ripple {
            to {
                transform: scale(2.5);
                opacity: 0;
            }
        }
        
        .points {
            font-size: 36px;
            font-weight: bold;
            background: linear-gradient(135deg, #73BEDD 0%, #4a9bc7 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 15px 0;
            text-shadow: 0 0 30px rgba(115, 190, 221, 0.5);
        }
        
        .floating-plus {
            position: absolute;
            font-size: 28px;
            font-weight: bold;
            color: #73BEDD;
            animation: floatUp 1.5s ease-out forwards;
            pointer-events: none;
            text-shadow: 0 0 10px rgba(115, 190, 221, 0.8);
        }
        
        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-80px) scale(1.5);
            }
        }
        
        .boost-btn {
            padding: 10px 20px;
            border: 2px solid #73BEDD;
            border-radius: 20px;
            color: #73BEDD;
            background: rgba(115, 190, 221, 0.1);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 10px;
            font-size: 13px;
        }
        
        .boost-btn:hover {
            background: #73BEDD;
            color: #0B0E36;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(115, 190, 221, 0.4);
        }
        
        .cooldown-timer {
            text-align: center;
            margin-top: 10px;
            padding: 10px;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 12px;
            border: 1px solid rgba(255, 107, 107, 0.3);
        }
        
        .cooldown-timer span {
            font-size: 14px;
            color: #ff6b6b;
            font-weight: bold;
        }
        
        .nav-bar {
            display: flex;
            justify-content: space-around;
            width: 100%;
            max-width: 480px;
            background: rgba(28, 31, 74, 0.95);
            backdrop-filter: blur(10px);
            padding: 10px 0;
            position: fixed;
            bottom: 0;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
            border-top: 1px solid rgba(115, 190, 221, 0.2);
            z-index: 100;
        }
        
        .nav-item {
            text-align: center;
            color: #8a9cc9;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 5px 15px;
            border-radius: 12px;
        }
        
        .nav-item:hover {
            color: #73BEDD;
            background: rgba(115, 190, 221, 0.1);
        }
        
        .nav-item i {
            font-size: 20px;
            margin-bottom: 3px;
            transition: transform 0.3s ease;
        }
        
        .nav-item:hover i {
            transform: scale(1.2);
        }
        
        .boost-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .boost-popup {
            width: 340px;
            background: linear-gradient(135deg, #1C1F4A 0%, #2a2f6b 100%);
            padding: 30px;
            border-radius: 25px;
            text-align: center;
            color: #fff;
            border: 2px solid #73BEDD;
            box-shadow: 0 20px 60px rgba(115, 190, 221, 0.3);
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .boost-popup h3 {
            color: #73BEDD;
            margin-bottom: 20px;
            font-size: 24px;
        }
        
        .boost-popup p {
            margin: 15px 0;
            font-size: 16px;
            color: #c9d1e8;
        }
        
        .boost-popup button {
            padding: 12px 30px;
            margin: 10px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .apply-boost-btn {
            background: linear-gradient(135deg, #73BEDD 0%, #4a9bc7 100%);
            color: #0B0E36;
        }
        
        .apply-boost-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(115, 190, 221, 0.5);
        }
        
        .close-btn {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>
    <!-- Background particles -->
    <div class="bg-particles">
        <div class="particle" style="top: 10%; left: 20%; animation-delay: 0s;"></div>
        <div class="particle" style="top: 30%; left: 80%; animation-delay: 2s;"></div>
        <div class="particle" style="top: 50%; left: 10%; animation-delay: 4s;"></div>
        <div class="particle" style="top: 70%; left: 70%; animation-delay: 6s;"></div>
        <div class="particle" style="top: 90%; left: 40%; animation-delay: 8s;"></div>
    </div>

    <div class="container">
        <div class="header">
            <div class="username" id="displayNickname">Nickname</div>
            <a class="leaderboard-btn" href="leaderboard.html">
                <i class="fas fa-trophy"></i>
                <span>Leaderboard</span>
            </a>
        </div>

        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-label">TAP POWER</div>
                <div class="stat-value" id="tapPowerDisplay">√ó1</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">TAPS LEFT</div>
                <div class="stat-value" id="tapsLeftDisplay">20</div>
            </div>
        </div>

        <button id="boostButton" class="boost-btn" onclick="openBoostOverlay()">
            <span>üöÄ</span>
            <span>Boost Power</span>
        </button>

        <div class="tap-circle" onclick="tapAction(event)">
            <div class="tap-inner">
                <div class="tap-logo">üíé</div>
            </div>
        </div>

        <div class="points" id="pointsDisplay">0 TAB points</div>

        <div id="cooldownTimer" class="cooldown-timer" style="display: none;">
            <span>‚è±Ô∏è Cooldown: <span id="countdownDisplay"></span></span>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item" onclick="location.href='homepage.html'">
            <i class="fas fa-home"></i>
            <div>Home</div>
        </div>
        <div class="nav-item" onclick="location.href='taskspage.html'">
            <i class="fas fa-tasks"></i>
            <div>Tasks</div>
        </div>
        <div class="nav-item" onclick="location.href='invites.html'">
            <i class="fas fa-user-friends"></i>
            <div>Invites</div>
        </div>
        <div class="nav-item" onclick="location.href='wallet.html'">
            <i class="fas fa-wallet"></i>
            <div>Wallet</div>
        </div>
    </div>

    <!-- Boost Overlay -->
    <div class="boost-overlay" id="boostOverlay">
        <div class="boost-popup">
            <h3>‚ö° Power Boost</h3>
            <p>Boost your points per tap to <span id="nextBoostValue" style="color: #73BEDD; font-weight: bold;">+2</span>!</p>
            <p>Cost: <span id="boostCostDisplay" style="color: #73BEDD; font-weight: bold;">200</span> TAB points</p>
            <button class="apply-boost-btn" onclick="applyBoost()">Apply Boost</button>
            <button class="close-btn" onclick="closeBoostOverlay()">Close</button>
        </div>
    </div>

    <script>
        const nicknameDisplay = document.getElementById('displayNickname');
        const savedNickname = localStorage.getItem('nickname');
        if (savedNickname) {
            nicknameDisplay.textContent = savedNickname;
        } else {
            window.location.href = 'welcomepage.html';
        }

        let points = parseFloat(localStorage.getItem('points')) || 0;
        let tapMultiplier = parseFloat(localStorage.getItem('tapMultiplier')) || 1;
        let boostCost = parseInt(localStorage.getItem('boostCost'), 10) || 200;

        const pointsDisplay = document.getElementById('pointsDisplay');
        const tapPowerDisplay = document.getElementById('tapPowerDisplay');
        const tapsLeftDisplay = document.getElementById('tapsLeftDisplay');
        const tapsPerHour = 20;
        const cooldownTime = 1 * 60 * 60 * 1000;
        let tapCount = parseInt(localStorage.getItem('tapCount'), 10) || 0;
        let lastTapTime = parseInt(localStorage.getItem('lastTapTime'), 10) || 0;

        const boostOverlay = document.getElementById('boostOverlay');
        const boostCostDisplay = document.getElementById('boostCostDisplay');
        const nextBoostValue = document.getElementById('nextBoostValue');
        const cooldownTimer = document.getElementById('cooldownTimer');
        const countdownDisplay = document.getElementById('countdownDisplay');

        function updateDisplay() {
            pointsDisplay.textContent = `${Math.floor(points)} TAB points`;
            tapPowerDisplay.textContent = `√ó${tapMultiplier}`;
            tapsLeftDisplay.textContent = Math.max(0, tapsPerHour - tapCount);
            boostCostDisplay.textContent = boostCost;
            nextBoostValue.textContent = `+${tapMultiplier + 1}`;
        }

        function formatTime(ms) {
            const minutes = Math.floor(ms / 60000);
            const seconds = Math.floor((ms % 60000) / 1000);
            return `${minutes}m ${seconds}s`;
        }

        function startCooldownTimer() {
            const now = Date.now();
            const remainingTime = cooldownTime - (now - lastTapTime);
            if (remainingTime > 0) {
                cooldownTimer.style.display = 'block';
                updateTimer(remainingTime);

                const interval = setInterval(() => {
                    const newRemainingTime = cooldownTime - (Date.now() - lastTapTime);
                    if (newRemainingTime <= 0) {
                        clearInterval(interval);
                        cooldownTimer.style.display = 'none';
                        tapCount = 0;
                        localStorage.setItem('tapCount', tapCount);
                        updateDisplay();
                    } else {
                        updateTimer(newRemainingTime);
                    }
                }, 1000);
            } else {
                cooldownTimer.style.display = 'none';
                tapCount = 0;
            }
        }

        function updateTimer(remainingTime) {
            countdownDisplay.textContent = formatTime(remainingTime);
        }

        if (Date.now() - lastTapTime >= cooldownTime) {
            tapCount = 0;
        }

        function createRipple(x, y) {
            const ripple = document.createElement('div');
            ripple.className = 'ripple';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.style.width = '50px';
            ripple.style.height = '50px';
            document.querySelector('.tap-inner').appendChild(ripple);
            setTimeout(() => ripple.remove(), 1000);
        }

        function tapAction(event) {
            const now = Date.now();
            if (tapCount >= tapsPerHour && now - lastTapTime < cooldownTime) {
                alert("You've reached the limit of 20 taps. Please wait 1 hour.");
                startCooldownTimer();
                return;
            }

            points += tapMultiplier;
            tapCount++;
            lastTapTime = Date.now();

            updateDisplay();

            localStorage.setItem('points', points);
            localStorage.setItem('tapCount', tapCount);
            localStorage.setItem('lastTapTime', lastTapTime);

            const rect = event.currentTarget.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;

            createRipple(x - 25, y - 25);

            const plus = document.createElement('div');
            plus.className = 'floating-plus';
            plus.textContent = `+${tapMultiplier}`;
            plus.style.left = event.clientX + 'px';
            plus.style.top = event.clientY + 'px';
            document.body.appendChild(plus);
            setTimeout(() => plus.remove(), 1500);

            if (tapCount >= tapsPerHour) {
                startCooldownTimer();
            }
        }

        function openBoostOverlay() {
            boostOverlay.style.display = 'flex';
        }

        function closeBoostOverlay() {
            boostOverlay.style.display = 'none';
        }

        function applyBoost() {
            if (points >= boostCost) {
                points -= boostCost;
                tapMultiplier += 1;
                boostCost *= 2;

                localStorage.setItem('points', points);
                localStorage.setItem('tapMultiplier', tapMultiplier);
                localStorage.setItem('boostCost', boostCost);

                updateDisplay();

                alert(`Boost applied! You now earn +${tapMultiplier} points per tap.`);
                closeBoostOverlay();
            } else {
                alert("Not enough points for this boost.");
            }
        }

        updateDisplay();
        startCooldownTimer();
    </script>
</body>
</html>
